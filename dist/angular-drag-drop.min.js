!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("angular")):"function"==typeof define&&define.amd?define(["angular"],r):"object"==typeof exports?exports.AngularDragDrop=r(require("angular")):t.AngularDragDrop=r(t.angular)}(this,function(t){return function(t){function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}var a={};return r.m=t,r.c=a,r.i=function(t){return t},r.d=function(t,r,a){Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:a})},r.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(a,"a",a),a},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=1)}([function(r,a){r.exports=t},function(t,r,a){var e=a(0);t.exports="ngFastDrag";var n=e.module(t.exports,[]);n.factory("dragContext",["$rootElement",function(t){function r(){return e.extend(n,{data:null,reset:r,start:a})}function a(t){return n.data=t,t}var n={};return r()}]),n.directive("dragContainer",["$rootElement","$parse","$timeout","dragContext",function(t,r,a,e){return{restrict:"A",link:function(n,o,l){function d(r){if(r.preventDefault(),a(function(){t.addClass("drag-active")},0,!1),e.start(l.dragData?n.$eval(l.dragData):o),o.addClass("drag-container-active"),s){var d={$event:r,$dragData:e.data};n.$apply(function(){s(n,d)})}}function i(r){if(r.preventDefault(),a(function(){t.removeClass("drag-active")},0,!1),e.reset(),o.removeClass("drag-container-active"),g){var l={$event:r,$dragData:e.data};n.$apply(function(){g(n,l)})}e.lastTarget&&e.lastTarget.$attrs.$removeClass("drag-over")}var s=l.onDragStart?r(l.onDragStart):null,g=l.onDragEnd?r(l.onDragEnd):null;l.$addClass("drag-container"),n.$watch(l.dragContainer,function(t){l.$set("draggable","undefined"==typeof t||t)}),s&&o.on("dragstart",d),g&&o.on("dragend",i)}}}]),n.directive("dropContainer",["$document","$parse","$window","dragContext",function(t,r,a,n){function o(t){return t[0]||t}function l(r){r=o(r);var n=r.getBoundingClientRect();return{width:Math.round(e.isNumber(n.width)?n.width:r.offsetWidth),height:Math.round(e.isNumber(n.height)?n.height:r.offsetHeight),top:Math.round(n.top+(a.pageYOffset||t[0].documentElement.scrollTop)),left:Math.round(n.left+(a.pageXOffset||t[0].documentElement.scrollLeft))}}return{restrict:"A",require:"dropContainer",controller:"DropContainerController",controllerAs:"dropContainer",link:function(t,a,o,d){function i(r){n.lastTarget&&n.lastTarget!==a&&n.lastTarget.$attrs.$removeClass("drag-over"),n.lastTarget={$attrs:o,$element:a};var e={$event:r,$dragData:n.data};u(t,e)&&(r.preventDefault(),o.$addClass("drag-over"),p&&t.$apply(function(){p(t,e)}))}function s(r){var i={$event:r,$dragData:n.data};if(u(t,i)){r.preventDefault();var s=l(a);o.$addClass("drag-over");var g=Number.MAX_VALUE,c=s.width,p=s.height,v=r.pageX-s.left,$=r.pageY-s.top,h=d.lastTarget;e.forEach(d.targets,function(t,r){var a=c/2,e=p/2;r.indexOf("left")>=0&&(a=1*c/4),r.indexOf("top")>=0&&(e=1*p/4),r.indexOf("right")>=0&&(a=3*c/4),r.indexOf("bottom")>=0&&(e=3*p/4);var n=Math.pow(a-v,2)+Math.pow(e-$,2);n<g&&(h=t,g=n)}),t.$apply(function(){f&&f(t,i),h&&(h!==d.lastTarget&&(d.lastTarget&&o.$removeClass("drop-container-"+d.lastTarget.anchor),o.$addClass("drop-container-"+h.anchor),d.lastTarget&&d.lastTarget.handleDragLeave(r,i),h.handleDragEnter(r,i),d.lastTarget=h),h.handleDragOver(r))})}}function g(r){o.$removeClass("drag-over");var a={$event:r,$dragData:n.data};t.$apply(function(){v&&v(t,a),d.lastTarget&&d.lastTarget.handleDragLeave(r,a),d.lastTarget&&(o.$removeClass("drop-container-"+d.lastTarget.anchor),d.lastTarget=null)})}function c(r){n.lastTarget&&n.lastTarget.$attrs.$removeClass("drag-over");var a={$event:r,$dragData:n.data};u(t,a)&&(r.preventDefault(),n.reset(),t.$apply(function(){$&&$(t,a),d.lastTarget&&d.lastTarget.handleDrop(r,a)})),d.lastTarget&&o.$removeClass("drop-container-"+d.lastTarget.anchor),d.lastTarget=null}var u=o.dropAccepts?r(o.dropAccepts):function(t,r){return"undefined"!=typeof r.$dragData},p=o.onDragEnter?r(o.onDragEnter):null,f=o.onDragOver?r(o.onDragOver):null,v=o.onDragLeave?r(o.onDragLeave):null,$=o.onDrop?r(o.onDrop):null;o.$addClass("drop-container"),f&&a.on("dragover",s),p&&a.on("dragenter",i),v&&a.on("dragleave",g),$&&a.on("drop",c)}}}]),n.controller("DropContainerController",[function(){var t=this,r="center top top-right right bottom-right bottom bottom-left left top-left".split(" ");t.targets={},t.lastTarget=null,t.attach=function(a){var e=a.anchor;if(r.indexOf(e)<0)throw new Error("Invalid drop target anchor `"+e+"`.");return t.targets[e]=a,a},t.detach=function(a){var e=a.anchor;if(r.indexOf(e)<0)throw new Error("Invalid drop target anchor `"+e+"`.");if(!t.targets[e]===a)throw new Error("The indicated drop target is not attached at the anchor `"+e+"`.");return delete t.targets[e],a}}]),n.directive("dropTarget",["$parse","dragContext",function(t,r){return{restrict:"A",require:["^dropContainer","dropTarget"],scope:!0,bindToController:{anchor:"@dropTarget"},controller:e.noop,controllerAs:"dropTarget",link:function(r,a,n,o){var l=o[0],d=o[1];n.$addClass("drop-target"),d.$attrs=n,d.$scope=r,n.$addClass("drop-target drop-target-"+d.anchor),l.attach(d);var i=d.$attrs.onDragEnter?t(d.$attrs.onDragEnter):e.noop,s=d.$attrs.onDragLeave?t(d.$attrs.onDragLeave):e.noop,g=d.$attrs.onDragOver?t(d.$attrs.onDragOver):e.noop,c=d.$attrs.onDrop?t(d.$attrs.onDrop):e.noop;d.handleDragEnter=function(t,r){i(d.$scope,r)},d.handleDragLeave=function(t,r){s(d.$scope,r)},d.handleDragOver=function(t,r){g(d.$scope,r)},d.handleDrop=function(t,r){c(d.$scope,r)},r.$on("$destroy",function(){l.detach(d)})}}}])}])});